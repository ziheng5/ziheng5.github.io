---
title: å¡å°”æ›¼æ»¤æ³¢åŠ Python å®ç°
date: 2025-05-11 17:39:04
tags:
    - ç®—æ³•
    - æœºå™¨å­¦ä¹ 
categories:
    - æœºå™¨å­¦ä¹ 
description: |
    ğŸ“¶ å¡å°”æ›¼æ»¤æ³¢çš„ç†è®ºå…¬å¼ä»¥åŠ Python ä»£ç çš„å®ç°
--- 

## 1. å¡å°”æ›¼æ»¤æ³¢æ˜¯ä»€ä¹ˆ
> å¯ä»¥å‚è€ƒæ²¹ç®¡ä¸Šçš„ä¸€ä¸ªè§†é¢‘ï¼šhttps://www.youtube.com/watch?v=IFeCIbljreY

æƒ³è±¡ä½ åœ¨å¼€è½¦æ—¶ç”¨æ‰‹æœºå¯¼èˆªï¼š
- GPS å®šä½ï¼ˆè§‚æµ‹å€¼ï¼‰ï¼šæœ‰è¯¯å·®ï¼ˆæ¯”å¦‚æ˜¾ç¤ºåœ¨è½¦é“ä¸­é—´ï¼Œå®é™…å¯èƒ½åå·¦ï¼‰ã€‚
- è½¦è¾†è¿åŠ¨æ¨¡å‹ï¼ˆé¢„æµ‹å€¼ï¼‰ï¼šæ ¹æ®é€Ÿåº¦æ¨ç®—ä½ç½®ï¼Œä½†ä¸å¤Ÿç²¾ç¡®ï¼ˆæ¯”å¦‚æ²¡è€ƒè™‘é£é€Ÿï¼‰ã€‚

å¡å°”æ›¼æ»¤æ³¢å°±æ˜¯**æŠŠä¸å®Œç¾çš„é¢„æµ‹ï¼ˆä¼°è®¡ï¼‰å’Œä¸å®Œç¾çš„è§‚æµ‹ç»“åˆèµ·æ¥ï¼Œå¾—åˆ°æ›´åŠ å‡†ç¡®çš„ç»“æœ**ï¼Œæ¯”å¦‚å°† GPS å®šä½å’Œè½¦è¾†è¿åŠ¨æ¨¡å‹ç»“åˆèµ·æ¥è€Œå¾—åˆ°æ›´åŠ å‡†ç¡®çš„ç»“æœã€‚

## 2. æ ¸å¿ƒæ€æƒ³ & ç®—æ³•æµç¨‹
- 1. é¢„æµ‹ï¼ˆçŒœï¼‰
  - æ ¹æ®å‰ä¸€ç§’çš„ä½ç½®å’Œé€Ÿåº¦ï¼Œé¢„æµ‹ç°åœ¨çš„ä½ç½®ã€‚
  - ä¾‹ï¼šè½¦ä»¥ 10m/s è¡Œé©¶ï¼Œ1 ç§’ååº”å‰è¿› 10 ç±³ã€‚ä½†å®é™…å¯èƒ½æœ‰è¯¯å·®ï¼ˆå¦‚åˆ¹è½¦å¯¼è‡´é€Ÿåº¦å˜åŒ–ï¼‰ã€‚
- 2. è§‚æµ‹ï¼ˆçœ‹ï¼‰
  - GPS å‘Šè¯‰ä½ ç°åœ¨çš„ä½ç½®ã€‚
  - ä¾‹ï¼šGPS æ˜¾ç¤ºè½¦åœ¨ 105 ç±³å¤„ï¼Œä½†å¯èƒ½æœ‰ $\pm 5$ ç±³è¯¯å·®ã€‚
- 3. èåˆï¼ˆä¿¡è°ï¼Ÿï¼‰
  - å¦‚æœé¢„æµ‹æ›´å¯é ï¼ˆæ¯”å¦‚ GPS ä¿¡å·å·®ï¼‰ï¼Œå°±å¤šç›¸ä¿¡é¢„æµ‹
  - å¦‚æœè§‚æµ‹æ›´å¯é ï¼ˆæ¯”å¦‚è½¦çªç„¶åˆ¹è½¦ï¼‰ï¼Œå°±å¤šç›¸ä¿¡è§‚æµ‹ã€‚
  - **å¡å°”æ›¼æ»¤æ³¢è‡ªåŠ¨è®¡ç®—â€œè¯¥ä¿¡å¤šå°‘â€**ï¼ˆå³**å¡å°”æ›¼å¢ç›Š**ï¼‰

## 3. ç®—æ³•ç»†èŠ‚ä¸å…¬å¼
å¡å°”æ›¼æ»¤æ³¢åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š**é¢„æµ‹**ï¼ˆPredictï¼‰å’Œ**æ›´æ–°**ï¼ˆUpdateï¼‰ã€‚

å‡è®¾ç³»ç»ŸçŠ¶æ€ä¸º $x_k$ï¼Œè§‚æµ‹å€¼ä¸º $z_k$ï¼Œè¿‡ç¨‹å™ªå£°å’Œè§‚æµ‹å™ªå£°å‡ä¸ºé«˜æ–¯ç™½å™ªå£°ï¼ˆç¬¦åˆæ­£æ€åˆ†å¸ƒï¼‰ã€‚

### 3.1 é¢„æµ‹é˜¶æ®µï¼ˆå…ˆéªŒä¼°è®¡ï¼‰
- çŠ¶æ€é¢„æµ‹ï¼š
$$\hat{x}_k^- = F_k \hat{x}_{k-1} + B_k u_k$$

  - $\hat{x}_k^-$ï¼šå…ˆéªŒçŠ¶æ€ä¼°è®¡ï¼ˆé¢„æµ‹å€¼ï¼‰ã€‚
  - $F_k$ï¼šçŠ¶æ€è½¬ç§»çŸ©é˜µã€‚
  - $B_k$ï¼šæ§åˆ¶è¾“å…¥çŸ©é˜µï¼ˆå¯é€‰ï¼Œå¤–éƒ¨æ§åˆ¶é‡ $u_k$ å­˜åœ¨æ—¶ä½¿ç”¨ï¼‰ã€‚
- åæ–¹å·®é¢„æµ‹ï¼š
$$P^-_k = F_k P_{k-1} F_k^T + Q_k$$
  - $P^-_k$ï¼šå…ˆéªŒä¼°è®¡è¯¯å·®åæ–¹å·®ã€‚
  - $Q_k$ï¼šè¿‡ç¨‹å™ªå£°åæ–¹å·®çŸ©é˜µã€‚

### 3.2 æ›´æ–°é˜¶æ®µï¼ˆåéªŒä¼°è®¡ï¼‰
- å¡å°”æ›¼å¢ç›Šè®¡ç®—ï¼š
$$K_k = P_k^- H_k^T (H_k P_k^- H_k^T + R_k)^{-1}$$
  - $K_k$ï¼šå¡å°”æ›¼å¢ç›Šï¼ˆæƒè¡¡é¢„æµ‹ä¸è§‚æµ‹çš„æƒé‡ï¼‰ã€‚
  - $H_k$ï¼šè§‚æµ‹çŸ©é˜µï¼ˆå°†çŠ¶æ€æ˜ å°„åˆ°è§‚æµ‹ç©ºé—´ï¼‰ã€‚
  - $R_k$ï¼šè§‚æµ‹å™ªå£°åæ–¹å·®çŸ©é˜µã€‚
- çŠ¶æ€æ›´æ–°ï¼š
$$\hat{x}_k = \hat{x}_k^- + K_k (z_k - H_k \hat{x}_k^-)$$
  - $\hat{x}_k$ï¼šåéªŒçŠ¶æ€ä¼°è®¡ï¼ˆæœ€ç»ˆè¾“å‡ºï¼‰
  - $z_k - H_k \hat{x}_k^-$ï¼š**æ–°æ¯**ï¼ˆè§‚æµ‹æ®‹å·®ï¼Œå³é¢„æµ‹ä¸å®æµ‹çš„å·®å¼‚ï¼Œç³»ç»ŸçŠ¶æ€çš„æ›´æ–°ä¿¡æ¯ï¼‰ã€‚
- åæ–¹å·®æ›´æ–°
$$P_k = (I-K_k H_k)P_k^-$$
  - $P_k$ï¼šåéªŒä¼°è®¡è¯¯å·®åæ–¹å·®ã€‚

> â€œ**æ–°æ¯**å’Œ**æ®‹å·®**è¿™ä¸ªè¯´æ³•æ²¡æœ‰å›ºå®šå®šä¹‰ï¼Œåœ¨ä¸åŒæ–‡çŒ®é‡Œæœ‰ä¸åŒè¯´è¾ã€‚æœ‰çš„è®¤ä¸ºæ–°æ¯å’Œæ®‹å·®æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œè§ã€ŠEstimation with applications to tracking navigationã€‹è¿™æœ¬ä¹¦ç¬¬ 205 é¡µã€‚ä¹Ÿæœ‰çš„è®ºæ–‡è®¤ä¸ºæ˜¯æœ‰åŒºåˆ«çš„ï¼Œå¦‚ä½ è¿™ç¯‡æ–‡ç« ã€‚è¿™ä¸ªè¿˜æ˜¯è¦çœ‹å…·ä½“æ–‡ç« é‡Œçš„å®šä¹‰ä½¿ç”¨ã€‚â€

### ä¼ªä»£ç 
```python
# åˆå§‹åŒ–
x_hat = initial_store         # çŠ¶æ€ä¿¡æ¯ä¼°è®¡
P = initial_covariance        # åˆå§‹åŒ–åæ–¹å·®çŸ©é˜µ
F = state_transition_matrix   # çŠ¶æ€è½¬ç§»çŸ©é˜µ
H = observation_matrix        # è§‚æµ‹çŸ©é˜µ
Q = process_noise_cov         # è¿‡ç¨‹å™ªå£°åæ–¹å·®
R = measurement_noise_cov     # è§‚æµ‹å™ªå£°åæ–¹å·®

for epoch new measurement z_k:
    # 1. é¢„æµ‹é˜¶æ®µ
    x_hat_minus = F @ x_hat + B @ u_k
    P_minus = F @ P @ F.T + Q

    # 2. æ›´æ–°é˜¶æ®µ
    K = P_minus @ H.T @ np.linalg.inv(H @ P_minus @ H.T + R)  # å¡å°”æ›¼å¢ç›Š
    x_hat = x_hat_minus + K @ (z_k - H @ x_hat_minus)          # çŠ¶æ€æ›´æ–°
    P = (np.eye(n) - K @ H) @ P_minus                     # åæ–¹å·®æ›´æ–°
```

## 4. å¡å°”æ›¼æ»¤æ³¢çš„åº”ç”¨
> å…³äºå¡å°”æ›¼æ»¤æ³¢ï¼Œç†è®ºä¸Šæ˜¯å¯ä»¥åº”ç”¨åœ¨ä»»æ„å½¢å¼çš„ä¿¡å·ä¸Šçš„ï¼ˆæ³¢ã€å›¾åƒã€éŸ³é¢‘ç­‰ï¼‰ï¼Œæœ¬æ–‡ä¸­çš„ä»£ç ä¼šä»¥å¡å°”æ›¼æ»¤æ³¢åœ¨å›¾åƒç›®æ ‡æ£€æµ‹ä¸­çš„åº”ç”¨ä¸ºä¾‹ã€‚
>
> å¯ä»¥å‚è€ƒæŸå¤§ä½¬å†™çš„ä¸€ä¸ªåº”ç”¨æ ·ä¾‹ï¼šhttps://github.com/liuchangji/kalman-filter-in-single-object-tracking